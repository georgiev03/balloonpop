(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class $ extends Phaser.Scene{constructor(){super({key:"BootScene"}),console.log("BootScene constructor called")}preload(){console.log("Starting to load assets..."),this.load.on("progress",t=>{console.log("Loading progress:",Math.round(t*100)+"%")}),this.load.image("balloon","assets/balloon.png"),this.load.image("arrow","assets/arrow.svg"),this.load.image("heart","assets/heart.png"),this.load.image("brokenheart","assets/brokenheart.png"),this.load.image("startscreen","assets/startscreen.jpg"),this.load.audio("pop","assets/pop.mp3"),this.load.audio("success","assets/success.mp3"),this.load.audio("win","assets/win.mp3"),this.load.json("wordList","src/words.json"),this.load.on("complete",()=>{console.log("All assets loaded successfully!"),console.log("Available textures:",Object.keys(this.textures.list)),this.scene.start("MainMenuScene")}),this.load.on("loaderror",t=>{console.error("Error loading asset:",t.key,t.src)})}create(){console.log("BootScene create called"),console.log("Heart texture exists:",this.textures.exists("heart")),console.log("Broken heart texture exists:",this.textures.exists("brokenheart"))}}class Z extends Phaser.Scene{constructor(){super({key:"MainMenuScene"})}create(){const{width:t,height:e}=this.scale,n=this.add.image(t/2,e/2,"startscreen"),s=t/n.width,o=e/n.height,i=Math.max(s,o);n.setScale(i).setAlpha(.8);const r=[];[{color:"#4df3ff",alpha:.4,thickness:32},{color:"#4df3ff",alpha:.6,thickness:24},{color:"#4df3ff",alpha:.8,thickness:16},{color:"#ffffff",alpha:.9,thickness:12}].forEach(({color:m,alpha:p,thickness:x})=>{const f=this.add.text(t/2,e*.2,"Правописни балони",{fontSize:Math.min(t*.08,84)+"px",fontFamily:"Arial Black",fontWeight:"bold",fill:"transparent",stroke:m,strokeThickness:x}).setOrigin(.5).setAlpha(p);r.push(f)});const c=this.add.text(t/2,e*.2,"Правописни балони",{fontSize:Math.min(t*.08,84)+"px",fontFamily:"Arial Black",fontWeight:"bold",fill:"#f0f0f0",stroke:"#4df3ff",strokeThickness:4}).setOrigin(.5);c.setShadow(2,2,"#000000",2,!0,!0),r.push(c),this.tweens.add({targets:r.slice(0,-1),alpha:"-=0.2",yoyo:!0,duration:2e3,repeat:-1,ease:"Sine.easeInOut"});const h=this.add.container(t/2,e*.6),y=[{color:"#4df3ff",alpha:.4,thickness:32},{color:"#4df3ff",alpha:.6,thickness:24},{color:"#4df3ff",alpha:.8,thickness:16},{color:"#ffffff",alpha:.9,thickness:12}];y.forEach(({color:m,alpha:p,thickness:x})=>{const f=this.add.text(0,0,"СТАРТ",{fontSize:Math.min(t*.06,72)+"px",fontFamily:"Arial Black",fontWeight:"bold",fill:"transparent",stroke:m,strokeThickness:x,padding:{x:8,y:8}}).setOrigin(.5).setAlpha(p);h.add(f)});const S=this.add.text(0,0,"СТАРТ",{fontSize:Math.min(t*.06,72)+"px",fontFamily:"Arial Black",fontWeight:"bold",fill:"#f0f0f0",stroke:"#4df3ff",strokeThickness:4,padding:{x:8,y:8}}).setOrigin(.5);S.setShadow(2,2,"#000000",2,!0,!0),h.add(S),S.setInteractive(),this.tweens.add({targets:h.list.slice(0,-1),alpha:"-=0.2",yoyo:!0,duration:2e3,repeat:-1,ease:"Sine.easeInOut"}),S.on("pointerover",()=>{h.list.forEach((m,p)=>{if(p<h.list.length-1){const x=y[p].alpha;m.setAlpha(x+.3)}}),this.tweens.add({targets:h,scaleX:1.1,scaleY:1.1,duration:100})}),S.on("pointerout",()=>{h.list.forEach((m,p)=>{if(p<h.list.length-1){const x=y[p].alpha;m.setAlpha(x)}}),this.tweens.add({targets:h,scaleX:1,scaleY:1,duration:100})}),S.on("pointerdown",()=>{this.scene.start("GameScene")}),this.addGreenParticles(),this.tweens.add({targets:r,y:e*.2,duration:1500,ease:"Bounce"}),this.tweens.add({targets:h,y:e*.6,duration:1e3,ease:"Bounce",delay:200})}addGreenParticles(){this.add.particles(0,0,"balloon",{x:{min:0,max:this.scale.width},y:{min:0,max:this.scale.height},quantity:1,frequency:500,scale:{start:.1,end:0},alpha:{start:.5,end:0},tint:65280,lifespan:2e3,gravityY:-50,blendMode:"ADD"})}}class J extends Phaser.Scene{constructor(){super({key:"GameScene"}),this.mistakeWords=[],this.wordSets=[],this.currentWordSet=null,console.log("GameScene constructor called")}create(){console.log("GameScene create called"),this.round=1,this.lives=10,this.balloons=[],this.baseTime=14,this.minTime=8,this.allWords=this.cache.json.get("wordList"),this.availableWords=[...this.allWords],console.log(`Loaded ${this.availableWords.length} words from JSON file`),this.addUI(),console.log("UI added"),this.startBalloonSpawning(),console.log("Balloon spawning started"),this.input.on("pointerdown",this.handleClick,this),console.log("Click handler added")}addUI(){const{width:t,height:e}=this.scale,n=10;this.roundText=this.add.text(n,10,"Рунд: 1",{fontSize:Math.min(t,e)*.04+"px",fill:"#000",fontFamily:"Arial Black",fontWeight:"bold"});const s=this.roundText.y+this.roundText.height+30;this.livesContainer=this.add.container(n+25,s),this.healthIcons=[];const o=e*.06,i=32,r=Math.min(t,e)*5e-4,l=i*r;for(let c=0;c<10;c++){const h=this.add.image(0,c*o,"heart");h.setScale(r),this.healthIcons.push(h),this.livesContainer.add(h)}this.heartsArea={left:n,right:n+l,top:s,bottom:s+o*10}}startBalloonSpawning(){this.spawnBalloons(),this.createSpawnTimer()}createSpawnTimer(){this.spawnTimer&&this.spawnTimer.remove(),this.spawnTimer=this.time.addEvent({delay:1e4,callback:()=>{this.balloons.length===0&&this.spawnBalloons()},callbackScope:this,loop:!0})}spawnBalloons(){if(console.log("Spawning balloons..."),this.lives<=0)return;if(this.availableWords.length===0){this.scene.start("WinScene",{rounds:this.round,wordSets:this.wordSets});return}this.clearBalloons();const{width:t,height:e}=this.scale,n=Phaser.Math.Between(0,this.availableWords.length-1),s=this.availableWords[n];this.availableWords.splice(n,1),this.currentWordSet=s;const o=s.words.filter(d=>d!==s.incorrect),i=s.incorrect,r=Phaser.Math.Between(0,3),l=Phaser.Utils.Array.Shuffle([...o]),c=Math.max(...o.map(d=>d.length),i.length),h=Math.floor(this.round/2)*.25,y=Math.max(this.minTime,this.baseTime-h);console.log(`Round ${this.round}, Time to top: ${y} seconds`);const m=Math.min(t,e)*.084*(1+(c>5?(c-5)*.084:0)),p=t*.13,x=1+(c>5?(c-5)*.0525:0),f=p*x,C=f*3,T=m*4+C,g=t*.35,B=t*.6,P=g+(B-T)/2+m/2,a=e+50,u=-100,w=Date.now();for(let d=0;d<4;d++){const M=Phaser.Math.Between(-t*.01,t*.01),A=Phaser.Math.Between(-e*.02,e*.02),b=P+d*f+M,F=a+A,D=d===r,X=D?i:l[d>=r?d-1:d],Y=Math.min(t,e)*.00152,L=1+(c>5?(c-5)*.0525:0),I=Y*L,k=this.add.sprite(b,F,"balloon");k.setScale(I),k.setData("word",X),k.setData("isIncorrect",D),k.setData("setID",w),k.setInteractive();const H=k.width*I,j=k.height*I,R=Math.min(t,e)*.026,q=1+(c>5?(c-5)*.0315:0),E=Math.floor(R*q),O=this.add.text(b,F,X,{fontSize:E+"px",fontFamily:"Arial, sans-serif",fontWeight:"bold",fill:"#000000",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:{x:0,y:E*.4},fixedWidth:H,align:"center"}).setOrigin(.5);O.y=F-j*.05,O.setShadow(1,1,"rgba(0,0,0,0.2)",2),k.setData("text",O),this.balloons.push(k);const N=[k,O],U=this.tweens.add({targets:N,y:u,duration:y*1e3,ease:"Linear",onComplete:()=>{O.destroy(),k.destroy(),this.balloons=this.balloons.filter(z=>z!==k),this.balloons.filter(z=>z.getData("setID")===w).length===0&&this.currentWordSet&&(this.wordSets.push({clicked:null,correct:this.currentWordSet.incorrect,allWords:this.currentWordSet.words}),this.round+=1,this.roundText.setText("Рунд: "+this.round),this.loseLife(),this.time.delayedCall(100,()=>{this.spawnBalloons()}))}});k.setData("tween",U)}}clearBalloons(){this.balloons.forEach(t=>{const e=t.getData("tween");e&&e.stop(),t.getData("text").destroy(),t.destroy()}),this.balloons=[]}update(){}handleClick(t){const e=this.balloons.find(n=>new Phaser.Geom.Rectangle(n.x-n.width*n.scaleX/2,n.y-n.height*n.scaleY/2,n.width*n.scaleX+60,n.height*n.scaleY+60).contains(t.x,t.y));if(e&&this.currentWordSet){const n=e.getData("isIncorrect"),s={clicked:e.getData("word"),correct:n?e.getData("word"):this.currentWordSet.incorrect,allWords:this.currentWordSet.words};this.wordSets.push(s),this.round+=1,this.roundText.setText("Рунд: "+this.round),n?(this.createParticles(e.x,e.y,"#00ff00"),this.sound.play("success")):(this.loseLife(),this.createParticles(e.x,e.y,"#ff0000"),this.sound.play("pop"),this.mistakeWords.push(e.getData("word"))),this.createArrowAnimation(t,e),this.clearBalloons(),this.spawnTimer&&this.spawnTimer.remove(),this.time.delayedCall(1e3,()=>{this.lives>0&&(this.spawnBalloons(),this.createSpawnTimer())})}}createParticles(t,e,n){const s=this.add.particles(0,0,"balloon",{x:t,y:e,speed:{min:100,max:200},angle:{min:0,max:360},scale:{start:.2,end:0},alpha:{start:.6,end:0},lifespan:500,quantity:10,tint:n});this.time.delayedCall(500,()=>{s.destroy()})}createArrowAnimation(t,e){const n=e.x,s=this.scale.height,o=this.add.sprite(n,s,"arrow"),i=Phaser.Math.Angle.Between(n,s,e.x,e.y);o.setRotation(i),this.tweens.add({targets:o,x:e.x,y:e.y,duration:200,onComplete:()=>o.destroy()})}loseLife(){if(this.lives-=1,this.healthIcons[this.lives]){const t=this.healthIcons[this.lives];t.setTexture("brokenheart"),t.setAlpha(.3),this.tweens.add({targets:t,x:t.x+5,duration:50,yoyo:!0,repeat:2})}this.cameras.main.shake(100,.005),this.lives<=0&&(this.clearBalloons(),this.spawnTimer&&this.spawnTimer.remove(),this.tweens.killAll(),this.scene.start("GameOverScene",{score:this.round,wordSets:this.wordSets}))}}class K extends Phaser.Scene{constructor(){super({key:"GameOverScene"})}init(t){this.score=t.score,this.wordSets=t.wordSets||[],console.log("GameOverScene initialized with:",{score:this.score,wordSets:this.wordSets})}create(){const{width:t,height:e}=this.scale;this.add.rectangle(0,0,t,e,0,.7).setOrigin(0);const n=this.add.text(t/2,e*.15,"Играта приключи",{fontSize:"96px",fontFamily:"Arial Black",fill:"#ff0000",stroke:"#ffffff",strokeThickness:4,shadow:{blur:8,color:"#ff0000",fill:!0},padding:{x:20,y:20}}).setOrigin(.5),s=this.add.text(t/2,e*.3,`Минати рундове: ${this.score}`,{fontSize:"32px",fontFamily:"Arial",fill:"#ffffff",stroke:"#000000",strokeThickness:4}).setOrigin(.5),o=t*.7,i=e*.5,r=t*.15,l=e*.35;this.add.rectangle(r,l,o,i,16777215).setOrigin(0).setStrokeStyle(2,0);let c=l+20;const h=o-80,y=this.wordSets.filter(a=>a.clicked!==a.correct);console.log("Processing mistake rounds:",y.length),y.forEach(a=>{let u=r+40,w=0;a.allWords.forEach((d,M)=>{let A="#000000";d===a.clicked&&(A="#ff0000"),d===a.correct&&(A="#00ff00");const b=this.add.text(u,c,d,{fontSize:"22px",fontFamily:"Arial",fill:A,fontWeight:"bold"});w+b.width+30>h&&M>0&&(c+=35,u=r+40,w=0,b.setPosition(u,c)),w+=b.width+30,u+=b.width+30}),c+=45}),y.length===0&&this.add.text(r+o/2,l+i/2,`Perfect Score!
No mistakes made!`,{fontSize:"32px",fontFamily:"Arial",fill:"#00aa00",align:"center",fontWeight:"bold"}).setOrigin(.5);const S=this.add.graphics().fillStyle(16777215).fillRect(r,l,o-20,i),m=this.add.container(0,0);m.setMask(new Phaser.Display.Masks.GeometryMask(this,S)),this.children.list.filter(a=>a instanceof Phaser.GameObjects.Text).forEach(a=>{a!==n&&a!==s&&m.add(a)}),this.add.rectangle(r+o-20,l,20,i,14540253).setOrigin(0);const p=c-l,x=Math.max(i/p*i,50),f=this.add.rectangle(r+o-20,l,20,x,6710886).setOrigin(0).setInteractive({draggable:!0,useHandCursor:!0}),v=Math.max(0,p-i)/(i-x),T=()=>{const a=l+i-x;f.y=Phaser.Math.Clamp(f.y,l,a);const u=(f.y-l)*v;m.y=-u};f.on("drag",(a,u,w)=>{f.y=w,T()}),this.input.on("wheel",(a,u,w,d,M)=>{a.x>=r&&a.x<=r+o&&a.y>=l&&a.y<=l+i&&(f.y+=d*.5,T())});const g=this.add.container(t/2,e*.92),B=this.add.rectangle(0,0,200,60,4474111,1).setOrigin(.5),P=this.add.text(0,0,"Играй отново",{fontSize:"32px",fontFamily:"Arial Black",fill:"#ffffff"}).setOrigin(.5);g.add([B,P]),g.setSize(250,60),B.setSize(250,60),g.setInteractive(),g.on("pointerover",()=>{B.setFillStyle(6711039),this.tweens.add({targets:g,scaleX:1.1,scaleY:1.1,duration:100})}),g.on("pointerout",()=>{B.setFillStyle(4474111),this.tweens.add({targets:g,scaleX:1,scaleY:1,duration:100})}),g.on("pointerdown",()=>{this.scene.start("GameScene")})}}class Q extends Phaser.Scene{constructor(){super({key:"WinScene"})}init(t){this.rounds=t.rounds,this.wordSets=t.wordSets||[]}create(){const{width:t,height:e}=this.scale;this.add.rectangle(0,0,t,e,0,.5).setOrigin(0),this.sound.play("win"),this.createFireworks();const n=this.add.text(t/2,e*.15,`Поздравления!
Ти спечели!`,{fontSize:"96px",fontFamily:"Arial Black",fill:"#4CAF50",stroke:"#ffffff",strokeThickness:4,align:"center",padding:{x:20,y:20}}).setOrigin(.5),s=t*.7,o=e*.35,i=t*.15,r=e*.45;this.add.rectangle(i,r,s,o,16777215).setOrigin(0).setStrokeStyle(2,0).setAlpha(.9);let l=r+20;const c=s-80,h=this.wordSets.filter(a=>a.clicked!==a.correct),y=this.add.text(i,r-40,"Объркани думи:",{fontSize:"28px",fontFamily:"Arial",fill:"#ffffff"});h.length>0?h.forEach(a=>{let u=i+40,w=0;a.allWords.forEach((d,M)=>{let A="#000000";d===a.clicked&&(A="#ff0000"),d===a.correct&&(A="#4CAF50");const b=this.add.text(u,l,d,{fontSize:"22px",fontFamily:"Arial",fill:A,fontWeight:"bold"});w+b.width+30>c&&M>0&&(l+=35,u=i+40,w=0,b.setPosition(u,l)),w+=b.width+30,u+=b.width+30}),l+=45}):this.add.text(i+s/2,r+o/2,`Перфектен резултат!
Няма грешки!`,{fontSize:"32px",fontFamily:"Arial",fill:"#4CAF50",align:"center",fontWeight:"bold"}).setOrigin(.5);const S=this.add.graphics().fillStyle(16777215).fillRect(i,r,s-20,o),m=this.add.container(0,0);m.setMask(new Phaser.Display.Masks.GeometryMask(this,S)),this.children.list.filter(a=>a instanceof Phaser.GameObjects.Text).forEach(a=>{a!==n&&a!==y&&m.add(a)}),this.add.rectangle(i+s-20,r,20,o,14540253).setOrigin(0);const p=l-r,x=Math.max(o/p*o,50),f=this.add.rectangle(i+s-20,r,20,x,6710886).setOrigin(0).setInteractive({draggable:!0,useHandCursor:!0}),v=Math.max(0,p-o)/(o-x),T=()=>{const a=r+o-x;f.y=Phaser.Math.Clamp(f.y,r,a);const u=(f.y-r)*v;m.y=-u};f.on("drag",(a,u,w)=>{f.y=w,T()}),this.input.on("wheel",(a,u,w,d,M)=>{a.x>=i&&a.x<=i+s&&a.y>=r&&a.y<=r+o&&(f.y+=d*.5,T())});const g=this.add.container(t/2,e*.85),B=this.add.rectangle(0,0,200,60,5025616,1).setOrigin(.5),P=this.add.text(0,0,"Играй отново",{fontSize:"32px",fontFamily:"Arial Black",fill:"#ffffff"}).setOrigin(.5);g.add([B,P]),g.setSize(250,60),B.setSize(250,60),g.setInteractive(),g.on("pointerover",()=>{B.setFillStyle(6732650),this.tweens.add({targets:g,scaleX:1.1,scaleY:1.1,duration:100})}),g.on("pointerout",()=>{B.setFillStyle(5025616),this.tweens.add({targets:g,scaleX:1,scaleY:1,duration:100})}),g.on("pointerdown",()=>{this.scene.start("GameScene")})}createFireworks(){const{width:t,height:e}=this.scale,n=[16711680,65280,255,16776960,16711935,65535],s=()=>{const i=Phaser.Math.Between(t*.2,t*.8),r=e,l=Phaser.Math.Between(t*.2,t*.8),c=Phaser.Math.Between(e*.2,e*.6),h=Phaser.Utils.Array.GetRandom(n),y=this.add.particles(i,r,"balloon",{speed:{min:100,max:200},scale:{start:.3,end:.1},lifespan:300,quantity:1,tint:h,blendMode:"ADD",emitting:!0});this.tweens.add({targets:y,x:l,y:c,duration:1e3,ease:"Quad.easeOut",onComplete:()=>{y.destroy();const S=this.add.particles(l,c,"balloon",{speed:{min:200,max:300},angle:{min:0,max:360},scale:{start:.4,end:0},alpha:{start:1,end:0},lifespan:800,quantity:30,tint:h,blendMode:"ADD",emitting:!1});S.start(),this.time.delayedCall(800,()=>S.destroy())}})},o=this.time.addEvent({delay:600,callback:s,callbackScope:this,loop:!0});for(let i=0;i<3;i++)this.time.delayedCall(i*400,s,[],this);this.time.delayedCall(6e3,()=>{o.destroy()})}}const _={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,parent:"game-container",autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720,min:{width:800,height:600},max:{width:1280,height:720}},backgroundColor:"#ffffff",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[$,Z,J,K,Q]};window.addEventListener("resize",()=>{if(G){const W=Math.min(window.innerWidth,1280),t=Math.min(window.innerHeight,720);G.scale.resize(W,t);const e=document.getElementById("game-container");e&&(e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)")}});console.log("Initializing game...");let G;try{G=new Phaser.Game(_),console.log("Game initialized successfully!")}catch(W){console.error("Error initializing game:",W)}
//# sourceMappingURL=index-CAjH2sZc.js.map
